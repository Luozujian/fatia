{% extends "layout.html" %}
{% block content %}
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default" id="moviesNumber">
              <div class="panel-heading" >1. 每年上架的电影数目 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('moviesNumber')">画图</button></div>
            </div>

            <div class="panel panel-default" id="revenueAndBugetAndRateOfReturn">
              <div class="panel-heading">
                <h3 class="panel-title">2. 票房和投资回报率 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('revenueAndBugetAndRateOfReturn')">画图</button></h3>
              </div>

            </div>

            <div class="panel panel-default" id="voteTrand">
              <div class="panel-heading">
                <span class="panel-title">3. 评分的总体趋势 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('voteTrand')">画图</button></span>
              </div>

            </div>
            <div class="panel panel-default" id="factors">
              <div class="panel-heading">
                <h3 class="panel-title">4. 影响票房和评分因素的相关系数 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('factors')">画图</button></h3>
              </div>
            </div>
            <div class="panel panel-default" id="typeOfMovieTrend">
              <div class="panel-heading">
                <h3 class="panel-title">5. 影片类型在全部电影的占比 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('typeOfMovieTrend')">画图</button></h3>
              </div>
            </div>
            <div class="panel panel-default" id="revenueOfKindsMovie">
              <div class="panel-heading">
                <h3 class="panel-title">6. 不同类型电影的总票房 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('revenueOfKindsMovie')">画图</button></h3>
              </div>
            </div>
            <div class="panel panel-default" id="voteOfKindsMovie">
              <div class="panel-heading">
                <h3 class="panel-title">7. 不同类型电影的平均评分 <button type="button" class="btn btn-success btn-xs" style="float: right" onclick="addImage('voteOfKindsMovie')">画图</button></h3>
              </div>
            </div>
        </div>
    </div>
<script type="text/javascript">

    function addImage(name) {
        jQuery.ajaxSetup({cache:false});
        var nodeName = "#" + name;
        var pre;
        var imgName = name + ".png";
        var childName = name + "1";
        if(name == "moviesNumber"){
            $(name).empty();
            pre = "1. 每年上架的电影数目";
        }else if(name == "revenueAndBugetAndRateOfReturn"){
            pre = "2. 票房和投资回报率"
        }else if(name == "voteTrand"){
            pre = "3. 评分的总体趋势 ";
        }else if(name == "factors"){
            pre = "4. 影响票房和评分因素的相关系数";
        }else if(name == "typeOfMovieTrend"){
            pre = "5. 影片类型在全部电影的占比";
        }else if(name == "revenueOfKindsMovie"){
            pre = "6. 不同类型电影的总票房";
        }else if(name == "voteOfKindsMovie"){
            pre = "7. 不同类型电影的平均评分";
        }

        var childNameTemp = '#' + childName;
        console.log(childNameTemp);
        console.log($(childNameTemp).length);
        if($(childNameTemp).length > 0){
            $(childNameTemp).remove();
            return;
        }


        $.ajax({
            type:"GET",
            url:"http://localhost:5000/admin/saveImg",
            data:{name:name},

            success: function (result) {
                var s = "<div class=\"panel-heading\">"+pre+" <button type=\"button\" class=\"btn btn-success btn-xs\" style=\"float: right\" onclick=\"addImage('"+name+"')\" >画图</button></div>\n" +
            "              <div class=\"panel-body\" id=\""+childName+"\">\n" +
            "                  <div style=\"margin-left: 20%\">\n" +
            "                      <img src=\"{{ url_for('admin.static',filename='img/987') }}\">\n" +
            "                  </div>\n" +
            "              </div>";
                s = s.replace("987",imgName);
                console.log(s);
                if(result == 'success'){
                    $(nodeName).empty();
                    $(nodeName).append(s);
                }
            }
        });


    }
</script>
{% endblock %}

