{% extends "layout.html" %}
{% block content %}

<div class="row">
    <div class="col-lg-12">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Comedy" id="type">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button" onclick="searchRecommend()" id="sure">确定</button>
            </span>
        </div><!-- /input-group -->
    </div><!-- /.col-lg-6 -->
</div><!-- /.row -->


<div class="row" style="margin-top: 1%">
    <div class="col-lg-12">
        <ul class="list-group" id="movielist">
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
                <span style="margin-left: 35%">director</span>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
            <li class="list-group-item">
                <span class="badge"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> 8.1</span>
                <a>Cras justo odio</a>
            </li>
        </ul>
    </div>
</div>


<script type="text/javascript">

    // 页面加载完成获取table
    $(document).ready(function () {
        searchRecommend();
    });

    function searchRecommend() {
        var type = $("#type").val();
        $.ajax({
            type: "GET",
            url: "http://localhost:5000/admin/tv/recommonded",
            data: {"type": type},
            success: function (result) {
                //需要遍历
                var jsonObject = eval(result);
                console.log(jsonObject.length);
                $("#movielist").empty();
                for (var i = 0; i < jsonObject.length; i++) {

                    s = "<li class=\"list-group-item\">\n" +
                        "                <span class=\"badge\"><span class=\"glyphicon glyphicon-star\" aria-hidden=\"true\"></span> " + jsonObject[i][2] + "</span>\n" +
                        "                <a href='" + jsonObject[i][3] + "'>" + jsonObject[i][0] + "</a>\n" +
                        "            </li>";
                    $("#movielist").append(s);
                }
            }
        });
        console.log(10);
    }

</script>
{% endblock%}